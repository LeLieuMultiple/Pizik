# Welcome to Sonic Pi v3.0.1

# Welcome to Sonic Pi v3.0.1

#Demo program gpiocontrol.rb to control GPIO devices from Sonic Pi
#and to receive data to play from a GPIO button being pressed
#written by Robin Newman, July 2017

SPoschandler_server = "192.168.1.100" #adjust for your own setup
use_osc SPoschandler_server, 8000 #SPoschandler_Server on port 8000

live_loop :preset_changer do
  sync :preset_change
  run_file '/home/pi/OSC/SP/eight_button_piano_chords.txt'
  stop
end

use_synth :piano

live_loop :play do
  use_real_time
  n = sync "/osc/play"
  puts n
  play scale(:c3, :major, num_octaves: 2 )[n[0]],sustain: 1,release: 0.2, cutoff_attack: 0.5, cutoff_release: 0.5
  play scale(:c3, :major, num_octaves: 2 )[n[0] + 2],sustain: 1,release: 0.2, cutoff_attack: 0.5, cutoff_release: 0.5
  play scale(:c3, :major, num_octaves: 2 )[n[0] + 4],sustain: 1,release: 0.2, cutoff_attack: 0.5, cutoff_release: 0.5
end